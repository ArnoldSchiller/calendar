    /* ============================================================
     * DAY VIEW
     * ============================================================
     *
     * The Day View is the most interaction-heavy part of CalendarView.
     *
     * It is responsible for:
     * - Displaying details for a single selected calendar day
     * - Showing holidays for that day
     * - Listing all events occurring on that date
     * - Handling UI state transitions for:
     *     • Viewing events
     *     • Editing an existing event
     *     • (Optionally) adding a new event
     *
     * IMPORTANT CONTEXT (What must already be true before this runs):
     *
     * - `this.displayedYear`, `this.displayedMonth` are set
     * - `this.selectedDay` is set (usually via:
     *      • click in Month View
     *      • jumpToDate() from EventListView)
     * - `this.currentView === "DAY"`
     * - EventManager is initialized and has cached events
     *
     * This method MUST be called only from within CalendarView.render().
     * It relies heavily on internal class state and cannot be used
     * as a standalone component without refactoring.
     */

	private renderDayView(): void {

	    /* --------------------------------------------------------
	     * ROOT CONTAINER FOR DAY VIEW
	     * --------------------------------------------------------
	     *
	     * This vertical box contains:
	     * 1. Date header (weekday + date)
	     * 2. Holiday rows (if any)
	     * 3. Event list OR "No events"
	     * 4. Add/Edit form (optional, depending on mode)
	     * 5. Action bar
	     * 6. Navigation back to Month View
	     */

	    const box = new St.BoxLayout({
	        vertical: true,
	        style_class: "calendar-events-main-box",
	    });

	    /* --------------------------------------------------------
	     * RESOLVE SELECTED DATE
	     * --------------------------------------------------------
	     *
	     * selectedDay should normally be set.
	     * Fallback to day "1" is a defensive safeguard and should
	     * normally never be hit during regular operation.
	     */

	    const selectedDate = new Date(
	        this.displayedYear,
	        this.displayedMonth,
	        this.selectedDay || 1
	    );
	
	    /* --------------------------------------------------------
	     * DAY MODE GUARD (VERY IMPORTANT)
	     * --------------------------------------------------------
	     *
	     * dayMode controls the internal UI sub-state:
	     *   - "VIEW" → show events only
	     *   - "ADD"  → show create form
	     *   - "EDIT" → show edit form for a specific event
	     *
	     * This guard ensures:
	     * - ADD / EDIT modes are ONLY valid for the exact date
	     *   they were initiated on.
	     *
	     * Example problem without this guard:
	     * - User clicks "Edit" on Jan 5
	     * - Then navigates to Jan 6
	     * - Edit form would still be shown for the wrong day
	     *
	     * Therefore:
	     * If the date changes → reset to VIEW mode.
	     */

	    if (
	        this.dayMode !== "VIEW" &&
	        (
	            !this.dayModeDate ||
	            this.dayModeDate.toDateString() !== selectedDate.toDateString()
	        )
	    ) {
	        this.dayMode = "VIEW";
	        this.editingEvent = null;
	        this.dayModeDate = null;
	    }

	    /* --------------------------------------------------------
	     * DATE HEADER
	     * --------------------------------------------------------
	     *
	     * Displays the full localized date:
	     * e.g. "Tuesday, 05 January 2026"
	     */

	    box.add_actor(
	        new St.Label({
	            text: selectedDate.toLocaleString(this.LOCALE, {
	                weekday: "long",
	                day: "2-digit",
	                month: "long",
	                year: "numeric",
	            }),
	            style_class: "day-details-title",
	        })
	    );

	    /* --------------------------------------------------------
	     * HOLIDAYS SECTION (OPTIONAL)
	     * --------------------------------------------------------
	     *
	     * Holidays are resolved via CalendarLogic (if present).
	     *
	     * This is completely independent from events.
	     * Holidays are rendered as visual info rows only.
	     */

	    if (this.applet.CalendarLogic) {
	        const holidays =
	            this.applet.CalendarLogic.getHolidaysForDate(
	                selectedDate,
	                "de"
	            );

	        holidays.forEach(h => {
	            const row = new St.BoxLayout({
        	        style_class: "calendar-event-button",
        	        style:
        	            "background-color: rgba(255,0,0,0.1);",
        	    });
	            row.add_actor(
 	               new St.Label({
	                    text: h,
	                    style_class:
	                        "calendar-event-summary",
	                })
	            );
	            box.add_actor(row);
	        });
        }

	    /* --------------------------------------------------------
	     * FETCH EVENTS FOR SELECTED DATE
	     * --------------------------------------------------------
	     *
	     * EventManager is responsible for all date filtering.
	     * CalendarView never interprets start/end times itself.
	     */

	    const events =
	        this.applet.eventManager.getEventsForDate(
       		    selectedDate
        	);

	    /* --------------------------------------------------------
	     * EVENT LIST RENDERING
	     * --------------------------------------------------------
	     *
	     * Each event is rendered as:
	     * - Summary label
	     * - Edit button
	     *
	     * No delete button exists here by design.
	     * (Deletion semantics are non-trivial with EDS.)
	     */

	    if (events.length > 0) {
	        events.forEach((ev: any) => {
	            const row = new St.BoxLayout({
	                style_class: "calendar-event-button",
	            });
	            
	            /* Event summary */
	            row.add_actor(
	                new St.Label({	
	                    text: ev.summary,
	                    style_class: "calendar-event-summary",
	                })
	            );
            
	            /* Edit button */
	            const editBtn = new St.Button({
	                label: _("Edit"),
	                style_class: "calendar-event-edit-button",
	            });
	            
	            editBtn.connect("clicked", () => {
	                this.dayMode = "EDIT";
	                this.editingEvent = ev;
	                this.dayModeDate = selectedDate;
	                this.render();
	            });
	            
	            row.add_actor(editBtn);
	            box.add_actor(row);
	        });
	    }

	    /* --------------------------------------------------------
	     * NO EVENTS PLACEHOLDER
	     * --------------------------------------------------------
	     *
	     * Only shown in VIEW mode.
	     * Not shown when ADD or EDIT form is active.
	     */

	    if (events.length === 0 && this.dayMode === "VIEW") {
	        box.add_actor(
	            new St.Label({
	                text: _("No events"),
	                style_class: "calendar-events-no-events-label",
	            })
	        );
	    }
	    
	    /* --------------------------------------------------------
	     * ADD / EDIT FORM INJECTION
	     * --------------------------------------------------------
	     *
	     * createTerminForm() dynamically builds a form UI.
	     *
	     * IMPORTANT ARCHITECTURAL NOTE:
	     *
	     * This tightly couples:
	     * - Day View
	     * - Event creation/editing UI
	     *
	     * TODO (Refactor Idea):
	     * - Extract createTerminForm into a separate component
	     * - Or move all form logic into EventListView or a Dialog
	     *
	     * WHY THIS IS CURRENTLY PROBLEMATIC:
	     *
	     * - Cinnamon CalendarServer + EDS via GJS/GIR is unreliable
	     *   for CREATE operations (especially description fields).
	     * - Description handling is partially broken / inconsistent.
	     * - Because of this, ADD functionality is currently limited.
	     */

	    if (this.dayMode === "ADD") {
	        box.add_actor(
	            this.createTerminForm(selectedDate)
	        );
	    }
	    else if (this.dayMode === "EDIT" && this.editingEvent) {
	        box.add_actor(
	            this.createTerminForm(selectedDate, this.editingEvent)
	        );
	    }

	    /* --------------------------------------------------------
	     * NAVIGATION BACK TO MONTH VIEW
	     * --------------------------------------------------------
	     *
	     * Always resets Day View state.
	     */

	    const backBtn = new St.Button({
	        label: _("Month view"),
	        style_class: "nav-button",
	        style: "margin-top: 15px;",
	    });
	
	    backBtn.connect("clicked", () => {
	        this.currentView = "MONTH";
	        this.dayMode = "VIEW";
	        this.editingEvent = null;
	        this.dayModeDate = null;
	        this.render();
	    });

	    /* --------------------------------------------------------
	     * ACTION BAR (CURRENTLY MOSTLY UNUSED)
	     * --------------------------------------------------------
	     *
	     * Originally planned to host the "Add event" button.
	     *
	     * WHY IT IS COMMENTED OUT:
	     *
	     * - Event creation via GJS / GIR / EDS is currently unstable
	     * - Description fields are buggy or missing
	     * - Creating events may silently fail depending on source
	     *
	     * TODO:
	     * Re-enable ONLY when:
	     * - EventManager.create() is fully reliable
	     * - Description roundtrips correctly via CalendarServer
	     */

	    const actionBar = new St.BoxLayout({
	        style_class: "calendar-day-actions",
	        x_align: St.Align.END
	    });
	
	    /* 
	    if (this.dayMode === "VIEW") {
	        const addBtn = new St.Button({
	            label: _("Add event"),
	            style_class: "calendar-event-button"
	        });
	
	        addBtn.connect("clicked", () => {
	            this.dayMode = "ADD";
	            this.editingEvent = null;
	            this.dayModeDate = selectedDate;
	            this.render();
	        });
	
	        actionBar.add_actor(addBtn);
	    }
	    */
	    
	    /* --------------------------------------------------------
	     * FINAL ASSEMBLY
	     * --------------------------------------------------------
	     */

	    box.add_actor(actionBar);
	    box.add_actor(backBtn);
	    this.contentBox.add_actor(box);
	}

